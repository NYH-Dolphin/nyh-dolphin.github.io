<!DOCTYPE html>
<html lang="en"><head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
        :root {
            --accent-color: #00aaff;
        }
    </style>

    
    
    
    
    
    

    
    <title>Nested Wave Function Collapse Enables Large-Scale Content Generation</title>
    <meta name="description" content="An wave function collapse algorithm framework that supports deterministic, aperiodic, infinite content generation that is suitable for level design.">
    <meta name="keywords" content='research, algorithm, pcg, wfc'>

    <meta property="og:url" content="https://NYH-Dolphin.github.io/en/research/n_wfc/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Nested Wave Function Collapse Enables Large-Scale Content Generation">
    <meta property="og:description" content="An wave function collapse algorithm framework that supports deterministic, aperiodic, infinite content generation that is suitable for level design.">
    <meta property="og:image" content="/path/to/image.png">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Nested Wave Function Collapse Enables Large-Scale Content Generation">
    <meta name="twitter:description" content="An wave function collapse algorithm framework that supports deterministic, aperiodic, infinite content generation that is suitable for level design.">
    <meta property="twitter:domain" content="https://NYH-Dolphin.github.io/en/research/n_wfc/">
    <meta property="twitter:url" content="https://NYH-Dolphin.github.io/en/research/n_wfc/">
    <meta name="twitter:image" content="/path/to/image.png">

    
    <link rel="canonical" href="https://NYH-Dolphin.github.io/en/research/n_wfc/" />

    <link rel="stylesheet" type="text/css" href="https://NYH-Dolphin.github.io/css/normalize.min.css" media="print" onload="this.media='all'">
    <link rel="stylesheet" type="text/css" href="https://NYH-Dolphin.github.io/css/main.css">
    <link disabled id="dark-theme" rel="stylesheet" href="https://NYH-Dolphin.github.io/css/dark.css">

    <script src="https://NYH-Dolphin.github.io/js/svg-injector.min.js"></script>
    <script src="https://NYH-Dolphin.github.io/js/feather-icons.min.js"></script>
    <script src="https://NYH-Dolphin.github.io/js/main.js"></script>

    
    
    
    
    <script src="https://player.lzti.com/api/player/167601724233" id="myhk" key="167601724233" m="1"></script>



    <!-- Support Letax Equation -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.css" integrity="sha384-KiWOvVjnN8qwAZbuQyWDIbfCLFhLXNETzBQjA/92pIowpC0d2O3nppDGQVgwd2nB" crossorigin="anonymous">

    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/katex.min.js" integrity="sha384-0fdwu/T/EQMsQlrHCCHoH10pkPLlKA1jL5dFyUOvB3lfeT2540/2g6YgSi2BL14p" crossorigin="anonymous"></script>

    <!-- Katex is a math typesetting library for the web which lets you write beautiful equations.-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.css" integrity="sha384-Xi8rHCmBmhbuyyhbI88391ZKP2dmfnOl4rT9ZfRI7mLTdk1wblIUnrIq35nqwEvC" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/katex.min.js" integrity="sha384-X/XCfMm41VSsqRNQgDerQczD69XqmjOOOwYQvr/uuC+j4OPoNhVgjdGFwhvN02Ja" crossorigin="anonymous"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.0/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"></script>
    <script>
      document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          // customised options
          // ‚Ä¢ auto-render specific keys, e.g.:
          delimiters: [
            {left: '$$', right: '$$', display: true},
            {left: '$', right: '$', display: false},
          ],
          // ‚Ä¢ rendering keys, e.g.:
          throwOnError : false
        });
      });
    </script>

    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.15.3/dist/contrib/auto-render.min.js" integrity="sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR" crossorigin="anonymous"
        onload="renderMathInElement(document.body);"></script>

    <!-- Analysis -->
    <script async defer data-website-id="website-id" src="https://analytics.example.com/script.js"></script>

    <!-- Support Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
    <link rel="manifest" href="/favicon/site.webmanifest">
    <link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
  
    
</head>
<body>
        <script type="text/javascript">
            
            setThemeByUserPref();
        </script><header class="header">
    <nav class="header-nav">

        
        <div class="avatar">
            <a href="https://NYH-Dolphin.github.io">
                <img src="https://NYH-Dolphin.github.io/images/avatar.jpg" alt="avatar" />
            </a>
        </div>
        

        <div class="nav-title">
            <a class="nav-brand" href="https://NYH-Dolphin.github.io">Dolphin NIE</a>
        </div>

        <div class="nav-links">
            
            <div class="nav-link">
                <a href="https://NYH-Dolphin.github.io/en/sharing/"><span data-feather='share-2'></span> Sharing </a>
            </div>
            
            <div class="nav-link">
                <a href="https://NYH-Dolphin.github.io/en/study/"><span data-feather='book-open'></span> Study </a>
            </div>
            
            <div class="nav-link">
                <a href="https://NYH-Dolphin.github.io/en/research/"><span data-feather='code'></span> Research </a>
            </div>
            
            <div class="nav-link">
                <a href="https://NYH-Dolphin.github.io/en/project/"><span data-feather='gift'></span> Project </a>
            </div>
            
            <div class="nav-link">
                <a href="https://NYH-Dolphin.github.io/en/about/"><span data-feather='smile'></span> About </a>
            </div>
            
            <div class="nav-link">
                <a href="https://NYH-Dolphin.github.io/en/tags/"><span data-feather='tag'></span> Tags </a>
            </div>
            
            <div class="nav-link">
                <a href="https://NYH-Dolphin.github.io/../zh"> ‰∏≠Êñá </a>
            </div>
            

            <span class="nav-icons-divider"></span>
            <div class="nav-link dark-theme-toggle">
                <span id="dark-theme-toggle-screen-reader-target" class="sr-only"></span>
                <a>
                    <span id="theme-toggle-icon" data-feather="moon"></span>
                </a>
            </div>

            <div class="nav-link" id="hamburger-menu-toggle">
                <span id="hamburger-menu-toggle-screen-reader-target" class="sr-only">menu</span>
                <a>
                    <span data-feather="menu"></span>
                </a>
            </div>

            
            <ul class="nav-hamburger-list visibility-hidden">
                
                <li class="nav-item">
                    <a href="https://NYH-Dolphin.github.io/en/sharing/"><span data-feather='share-2'></span> Sharing </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://NYH-Dolphin.github.io/en/study/"><span data-feather='book-open'></span> Study </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://NYH-Dolphin.github.io/en/research/"><span data-feather='code'></span> Research </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://NYH-Dolphin.github.io/en/project/"><span data-feather='gift'></span> Project </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://NYH-Dolphin.github.io/en/about/"><span data-feather='smile'></span> About </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://NYH-Dolphin.github.io/en/tags/"><span data-feather='tag'></span> Tags </a>
                </li>
                
                <li class="nav-item">
                    <a href="https://NYH-Dolphin.github.io/../zh"> ‰∏≠Êñá </a>
                </li>
                
                <li class="nav-item dark-theme-toggle">
                    <span id="dark-theme-toggle-screen-reader-target" class="sr-only">theme</span>
                    <a>
                        <span id="theme-toggle-icon" data-feather="moon"></span>
                    </a>
                </li>
            </ul>

        </div>
    </nav>
</header>
<main id="content">
    <div class="post container">
    <div class="post-header-section">
        <h1>Nested Wave Function Collapse Enables Large-Scale Content Generation</h1>
        <small role="doc-subtitle">An wave function collapse algorithm framework that supports deterministic, aperiodic, infinite content generation that is suitable for level design.</small>
        <p class="post-date">
            March 18, 2024
        </p>

        <ul class="post-tags">
        
            <li class="post-tag"><a href="https://NYH-Dolphin.github.io/en/tags/research">research</a></li>
        
            <li class="post-tag"><a href="https://NYH-Dolphin.github.io/en/tags/algorithm">algorithm</a></li>
        
            <li class="post-tag"><a href="https://NYH-Dolphin.github.io/en/tags/pcg">pcg</a></li>
        
            <li class="post-tag"><a href="https://NYH-Dolphin.github.io/en/tags/wfc">wfc</a></li>
        
        </ul>
    </div>

    <div class="post-content">
        <p>
            <blockquote>
<p>This research was <a href="https://ieeexplore.ieee.org/abstract/document/10333214">first accepted by IEEE Conference on Games 2023</a> and was extended to <a href="https://ieeexplore.ieee.org/abstract/document/10473141">journal paper for IEEE Transactions on Games 2024</a>. We won the <strong>Best Paper Award</strong>üèÜ for IEEE Conference on Games! Congratulations to all the authors and their contributions to this paper! Thanks to NYU Tandon Game Innovation Lab for supporting the publication of this paper!</p>
</blockquote>
<h2 id="1-what-is-wave-function-collapse-wfc">1. What is Wave Function Collapse (WFC)?</h2>
<p><img src="/images/research/n_wfc.assets/image-20240414125416245.png" alt="image-20240414125416245" style="zoom:80%;" /></p>
<p><strong>Wave Function Collapse (WFC)</strong> algorithm has been introduced by <a href="https://github.com/mxgmn">Maxim Gumin</a> for Texture Synthesis. However, it quickly gained a lot of attention in <strong>Procedural Content Generation</strong> (especially scene/level generation). It can be used not only for 2D scene generation, but also for more complex game scene generation in 3D.</p>
<p>If you&rsquo;re wondering how exactly this algorithm works, Gumin&rsquo;s <a href="https://github.com/mxgmn/WaveFunctionCollapse/tree/master?tab=readme-ov-file">Github repository</a> has a lot of examples explaining it. In addition, you can also check this <a href="https://oskarstalberg.com/game/wave/wave.html">Demo</a> to see their visualization of WFC.</p>
<h2 id="2-what-is-this-paper-about">2. What is this paper about?</h2>
<p>This paper optimizes the <strong>Time Complexity</strong> of the WFC from exponential level $O(C^n)$ to <strong>polynomial level</strong> $O(n)$.  We propose an optimized algorithm: <strong>Nested Wave Function Collapse (N-WFC)</strong> to address the limitations of WFC&rsquo;s current ability to produce only small-scale content. We provide the <strong>pseudo-code of the algorithm framework</strong> and the <strong>tileset norms (complete and sub-complete tileset)</strong> required to realize the algorithm.</p>
<p><img src="/images/research/n_wfc.assets/image-20240414115559547.png" alt="image-20240414115559547"  /></p>
<p>We also further prove that our optimized algorithm has good <strong>characteristics</strong> of:</p>
<ul>
<li><strong>Infinity</strong>: theoretically it can generate infinite content</li>
<li><strong>Aperiodicity</strong>: under a large-scale generation, the generated content of the algorithm will not be repeated</li>
<li><strong>Determinacy</strong>: it will not backtrack due to conflicts</li>
</ul>
<p>For more information on this paper, please read the <a href="https://ieeexplore.ieee.org/abstract/document/10473141">paper</a>!</p>
<h2 id="3-awesome-experiments">3. Awesome Experiments</h2>
<p>We experimented the feasibility of our algorithm in two classic games, <strong>Super Mario Bros</strong> and <strong>Carcassonne</strong>. The results of the algorithm are amazing. üòÆ</p>
<p>The advantage for WFC is that it <strong>decouples the design and art of the tileset from the generative logic</strong>. Neither need be restricted by the other. In other words, tiles of different artistic designs are equivalent for the algorithm!</p>
<h3 id="super-mario-bros">Super Mario Bros</h3>
<p><img src="/images/research/n_wfc.assets/image-20240414120316058.png" alt="image-20240414120316058"></p>
<h3 id="carcassonne">Carcassonne</h3>
<p><img src="/images/research/n_wfc.assets/image-20240414124435782.png" alt="image-20240414124435782"></p>
<h2 id="4-cite-the-paper">4. Cite the Paper</h2>
<p>Nie, Y., Zheng, S., Zhuang, Z., &amp; Togelius, J. (2024). Nested Wave Function Collapse Enables Large-Scale Content Generation. <em>IEEE Transactions on Games</em>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bibtex" data-lang="bibtex"><span style="color:#a6e22e">@article</span>{nie2024nested,
  <span style="color:#a6e22e">title</span>=<span style="color:#e6db74">{Nested Wave Function Collapse Enables Large-Scale Content Generation}</span>,
  <span style="color:#a6e22e">author</span>=<span style="color:#e6db74">{Nie, Yuhe and Zheng, Shaoming and Zhuang, Zhan and Togelius, Julian}</span>,
  <span style="color:#a6e22e">journal</span>=<span style="color:#e6db74">{IEEE Transactions on Games}</span>,
  <span style="color:#a6e22e">year</span>=<span style="color:#e6db74">{2024}</span>,
  <span style="color:#a6e22e">publisher</span>=<span style="color:#e6db74">{IEEE}</span>
}
</code></pre></div>
        </p>
    </div>

    <div class="prev-next">
        
            
        
    </div>
</div>

<aside class="post-toc">
    <nav id="toc">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#1-what-is-wave-function-collapse-wfc">1. What is Wave Function Collapse (WFC)?</a></li>
        <li><a href="#2-what-is-this-paper-about">2. What is this paper about?</a></li>
        <li><a href="#3-awesome-experiments">3. Awesome Experiments</a>
          <ul>
            <li><a href="#super-mario-bros">Super Mario Bros</a></li>
            <li><a href="#carcassonne">Carcassonne</a></li>
          </ul>
        </li>
        <li><a href="#4-cite-the-paper">4. Cite the Paper</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </nav>
</aside>



    

        </main><footer class="footer">
    <span>&copy; 2024 NYH-Dolphin</span>
    <span>
        Made with &#10084;&#65039; using <a target="_blank" href="https://github.com/526avijitgupta/gokarna">Gokarna</a>
    </span>
</footer>
</body>
</html>
